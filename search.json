[
  {
    "objectID": "status.html",
    "href": "status.html",
    "title": "2025-2026 Uploader Status",
    "section": "",
    "text": "2025-2026 Uploader Status2024-2025 Uploader Status\n\n\n\n\nlast update: 2025-12-16 13:40:06\n\n\nFile StatusHeader ColumnsFile NameUpdatedtype checkname checkyearindextimeseriesmetricSEupSEloAndrews   nonononononononoBjorkstedt   nonononononononoBurke   nonononononononoCope   nonononononononoField   nonononononononoGoodSeabird_CCC_density.csv2025-12-12   13:34:41yesyesyesyesyesyesnonoSeabird_DestructionIsland_RHAU_diet.csv2025-12-10   13:48:06yesyesyesyesyesyesnonoSeabird_NCC_density.csv2025-12-13   13:27:08yesyesyesyesyesyesnonoSeabird_SCC_density.csv2025-12-12   13:34:46yesyesyesyesyesyesnonoSeabird_SCC_density2.csv2025-12-12   13:34:49yesnoyesyesyesyesnonoSeabird_YaquinaHead_COMU_diet.csv2025-12-10   13:48:11yesyesyesyesyesyesnonoSeabird_YaquinaHead_productivity.csv2025-12-10   13:48:16yesyesyesyesyesyesnonoGreene-Munschfreshwater_indicators_status_trends_2025.csv2025-12-01   20:43:55yesnononononononofreshwater_indicators_time_series_2025.csv2025-11-20   17:26:46yesnoyesnononononoHabitat_snowpack.csv2025-12-02   13:34:29yesyesyesyesyesnoyesyesHabitat_streamflow_eco_1_day_max.csv2025-12-02   18:05:53yesnoyesyesyesnoyesyesHabitat_streamflow_eco_7_day_min.csv2025-12-02   18:05:57yesnoyesyesyesnoyesyesHabitat_streamflow_eco_Aug_mean_max_temp.csv2025-12-02   18:06:01yesyesyesyesyesnoyesyesHabitat_streamflow_esu_1_day_max.csv2025-12-02   18:06:05yesnoyesyesyesnoyesyesHabitat_streamflow_esu_7_day_min.csv2025-12-02   18:06:10yesnoyesyesyesnoyesyesHolland-Kasperski   nonononononononoLawson   nonononononononoMelin   nonononononononoMoore   nonononononononoMuhling   nonononononononoNewport Line   nonononononononoNorman   nonononononononoPreti   nonononononononoRamusonCCIEA_LightTrapTimeSeries.csv2025-12-03   23:36:14yesnoyesyesyesyesyesnoCCIEA_LightTrapTimeSeries_Daily.csv2025-12-04   00:12:46yesnonoyesyesyesyesnoCCIEA_LightTrapTimeSeries_Metadata.csv2025-12-04   00:12:50yesnononononononoSamhouri   nonononononononoSchroederoc_beuti_M.csv2025-09-10   13:00:43yesyesyesyesyesyesnonooc_cuti_M.csv2025-09-10   13:00:39yesyesyesyesyesyesnonooc_mei_M.csv2025-12-16   08:30:04yesyesyesyesyesyesnonooc_noi_M.csv2025-12-03   22:31:49yesyesyesyesyesnononooc_npgo_M.csv2025-12-16   08:30:08yesyesyesyesyesnononooc_oni_M.csv2025-12-16   08:30:12yesyesyesyesyesnononooc_pdo_M.csv2025-12-16   08:30:15yesyesyesyesyesnononooc_SST_M.csv2025-12-03   22:31:41yesyesyesyesyesyesyesyesoc_UI_M.csv2025-12-03   22:32:07yesyesyesyesyesnoyesyesoc_vwnd_M.csv2025-12-03   22:31:46yesyesyesyesyesyesyesyesThompson   nonononononononoTolimieriGF_crab_finfish.csv2025-02-19   18:15:45yesyesyesyesyesyesyesyesGF_diversity_SimpDiv.csv2025-02-19   18:15:58yesyesyesyesyesnoyesyesGF_diversity_SppDen.csv2025-02-19   18:16:21yesnoyesyesyesyesyesyesGF_diversity_SppRich.csv2025-02-19   18:16:21yesyesyesyesyesyesyesyesGF_mean_trophic_level.csv2025-02-19   18:15:13yesyesyesyesyesnoyesyesGF_scavenger_ratio.csv2025-02-19   18:15:26yesyesyesnoyesyesyesyes\n\n\n\n\n\n\n2024-2025 Uploader Status\nlast update: 2025-12-16 13:40:06\n\n\nFile StatusHeader ColumnsFile NameUpdatedtype checkname checkyearindextimeseriesmetricSEupSEloAndrewsrevenue.csv2025-01-13   18:59:29yesnoyesyesyesyesnonospecies_landings.csv2025-01-13   18:59:39yesnoyesyesyesyesnonoBjorkstedt (Metadata updated: 2024-10-07 14:18:57 PDT)Zoop_Trinidad_krill_length_biomass_M.csv2024-10-07   21:17:09yesyesyesyesyesnoyesyesBurke (Metadata updated: 2024-12-04 14:33:36 PST)Forage_NCC_JSOES_cpue.csv2025-01-07   00:27:32yesyesyesyesyesyesyesyesForage_NCC_JSOES_prevalence.csv2024-12-04   22:47:44yesyesyesyesyesyesnonoCope   nonononononononoFieldForage_CCC_RREAS_index.csv2025-01-08   00:32:35yesyesyesyesyesyesyesyesForage_NCC_RREAS_index.csv2025-01-20   21:26:15yesnoyesyesyesyesyesyesGood (Metadata updated: 2025-01-15 12:04:47 PST)Seabird_BeachCombers_mortality_Central.csv2024-12-18   00:30:22yesnoyesyesyesyesnonoSeabird_BeachCombers_mortality_North.csv2024-12-19   23:54:01yesnoyesyesyesyesnonoSeabird_BeachWatch_mortality.csv2024-12-18   18:05:22yesyesyesyesyesyesnonoSeabird_CCC_density.csv2024-12-02   20:38:05yesyesyesyesyesyesnonoSeabird_COASST_mortality.csv2024-12-10   23:11:31yesyesyesyesyesyesnonoSeabird_DestructionIsland_RHAU_diet.csv2024-12-05   03:42:48yesyesyesyesyesyesnonoSeabird_DestructionIsland_RHAU_productivity.csv2024-12-05   05:54:20yesnoyesyesyesyesnonoSeabird_Farallon_productivity.csv2024-12-05   23:10:34yesyesyesyesyesyesnonoSeabird_NCC_density.csv2024-12-09   20:33:13yesyesyesyesyesyesnonoSeabird_SCC_density.csv2024-12-16   20:46:14yesyesyesyesyesyesnonoSeabird_SEFarallon_BRAC_diet.csv2024-12-05   22:40:12yesyesyesyesyesyesnonoSeabird_SEFarallon_CAAU_diet.csv2024-12-16   19:27:48yesyesyesyesyesyesnonoSeabird_SEFarallon_COMU_diet.csv2024-12-05   22:35:44yesyesyesyesyesyesnonoSeabird_SEFarallon_PIGU_diet.csv2024-12-05   22:52:35yesyesyesyesyesyesnonoSeabird_SEFarallon_RHAU_diet.csv2024-12-05   22:42:27yesyesyesyesyesyesnonoSeabird_YaquinaHead_COMU_diet.csv2024-12-05   20:20:53yesyesyesyesyesyesnonoSeabird_YaquinaHead_productivity.csv2024-12-05   20:29:40yesyesyesyesyesyesnonoGreene-Munschfreshwater_indicators_status_trends_2024.csv2024-10-10   13:38:05yesnononononononofreshwater_indicators_time_series_2024.csv2024-10-10   13:33:37yesnoyesnononononoHolland-KasperskiHWB_vessel diversification.csv2024-12-26   22:23:26yesnoyesyesyesnononoLawsonConfirmedWhaleEntanglements.csv2025-04-22   18:56:43yesnoyesyesyesnononoConfirmedWhaleEntanglements20250108.csv2025-04-22   18:55:10yesnoyesyesyesnononoPreliminaryWhaleEntanglements.csv2025-01-03   01:02:46yesnoyesyesyesnononoMelinMM_sea_lion_pup.csv2024-12-30   20:59:55yesyesyesyesyesyesyesyesMoore   nonononononononoMuhling (Metadata updated: 2024-12-15 08:25:02 PST)HMS_biomass.csv2024-12-15   16:24:54yesyesyesyesyesyesyesyesHMS_recruitment.csv2024-12-15   16:24:56yesyesyesyesyesyesyesyesNewport LineZoop_Newport_copepods.csv2025-01-13   21:07:41yesyesyesyesyesyesnonoNorman (Metadata updated: 2024-12-03 12:13:15 PST)HWB_all_commercial_eng_rel.csv2024-12-02   16:18:45yesnononononononoHWB_all_recreational_eng_rel.csv2024-11-12   23:34:11yesnoyesnononononoHWB_CSVI.csv2025-01-16   21:54:50yesyesyesyesyesnononoHWB_rec_Top5list_Engagement-Reliance.csv2024-11-12   23:47:41yesnoyesnononononoHWB_social_vulnerability.csv2024-12-02   17:35:36yesnononononononoHWB_Theil_Index_Update.csv2024-12-02   22:11:58yesnoyesyesyesyesnonoHWB_Top5list_Engagement-Reliance.csv2024-08-28   22:13:14yesnononononononoPreti (Metadata updated: 2025-01-23 11:06:15 PST)HMS.Bluefin_diets_2024.csv2024-12-12   01:31:29yesnoyesnoyesyesnonoHMS_albacore_diets.csv2024-12-05   20:52:47yesyesyesnoyesyesnonoHMS_swordfish_diets.csv2024-12-05   20:52:37yesyesyesyesyesyesnonoSamhouriFPN-fishery-participation-networks.csv2025-01-10   16:27:17yesnoyesyesyesyesnonoSchroederoc_arg_Newport_M.csv2025-01-14   18:35:56yesyesyesyesyesyesyesyesoc_beuti_M.csv2025-06-10   13:02:06yesyesyesyesyesyesnonooc_cuti_M.csv2025-06-10   13:02:02yesyesyesyesyesyesnonooc_do_calcofi_M.csv2024-12-13   02:37:31yesyesyesyesyesyesyesyesoc_do_Newport_M.csv2024-12-13   02:53:38yesyesyesyesyesyesyesyesoc_hci_M.csv2025-05-23   16:17:43yesyesyesyesyesyesyesyesoc_lusi_A.csv2025-01-17   04:19:47yesyesyesyesyesyesyesyesoc_mei_M.csv2025-06-10   07:30:03yesyesyesyesyesyesnonooc_noi_M.csv2025-06-03   21:31:45yesyesyesyesyesnononooc_npgo_M.csv2025-06-10   07:30:08yesyesyesyesyesnononooc_nph_jf_A.csv2025-03-07   03:22:42yesyesyesyesyesyesyesyesoc_nph_M.csv2025-05-23   17:50:07yesyesyesyesyesyesyesyesoc_oni_M.csv2025-06-10   07:30:12yesyesyesyesyesnononooc_pdo_M.csv2025-06-10   07:30:16yesyesyesyesyesnononooc_SST_M.csv2025-06-03   21:31:37yesyesyesyesyesyesyesyesoc_sti_A.csv2025-01-17   04:19:47yesyesyesyesyesyesyesyesoc_tumi_A.csv2025-01-17   04:19:47yesyesyesyesyesyesyesyesoc_UI_M.csv2025-06-03   21:32:01yesyesyesyesyesnoyesyesoc_vwnd_M.csv2025-06-03   21:31:41yesyesyesyesyesyesyesyesThompsonForage_SCC_CalCOFI_catch.csv2025-01-10   17:41:35yesyesyesyesyesyesyesyesTolimieriGF-adult-index.csv2025-01-24   02:37:07yesnononononononoGF-availability-to-ports.csv2024-12-17   23:48:30yesnononononononoGF-center-of-gravity.csv2025-01-24   17:41:14yesnoyesyesyesyesnonoGF-combined-indices.csv2024-09-30   21:06:40yesnononononononoGF-juvenile-abundance.csv2025-01-23   01:17:10yesnoyesyesyesyesnonoGF-juvenile-model-info.csv2024-12-17   23:39:03yesnononononononoGF-port-biomass.csv2025-01-24   17:41:19yesnoyesyesyesyesnonoGF-regional-biomass-index.csv2025-01-24   17:41:25yesnoyesnononononoGF-sablefish-cog.csv2024-12-17   23:44:36yesnoyesnononononoGF-sablefish-juv-availability-to-ports.csv2024-12-17   23:46:02yesnoyesnononononoGF-sablefish-size.csv2025-01-23   01:15:29yesnononononononoGF_crab_finfish.csv2025-02-10   21:28:06yesyesyesyesyesyesyesyesGF_diversity_SimpDiv.csv2025-02-10   21:28:06yesyesyesyesyesnoyesyesGF_diversity_SppDen.csv2025-02-10   21:20:14yesnoyesyesyesyesyesyesGF_diversity_SppRich.csv2025-02-10   21:28:07yesyesyesyesyesyesyesyesGF_mean_trophic_level.csv2025-02-10   21:28:07yesyesyesyesyesnoyesyesGF_scavenger_ratio.csv2025-02-10   21:28:07yesyesyesnoyesyesyesyesoc_do-WA-ce7.csv2025-02-07   19:29:18yesnoyesnoyesyesnono"
  },
  {
    "objectID": "faq.html",
    "href": "faq.html",
    "title": "FAQ",
    "section": "",
    "text": "1 View Current Indicators\n\n\n\n\n\n\nNoteMy indicator isn’t listed, how do I add it’s metadata?\n\n\n\n\n\nIs your indicator -\n\na new indicator in an existing data file? (for example just a new species, location, etc)? If so:\n\ndownload your metadata and add a new line for the new indicator\nwe will automatically be notified about indicators that were not previously submitted\n\nan entirely new file of indicator data?\n\nDo your best to format and name the data file following Section 4\nUpload the file and notify Greg or Lynn about the new data\nprovide us metadata for the new data\n\n\n\n\n\n\n\n\n\n\n\nNoteAfter uploading new data and metadata, when will I see updated plots and metadata on this page?\n\n\n\n\n\n\nCurrently we run a GitHub action every morning to:\n\ngenerate the status of all data provided so far this ESR season\nmake new plots for each provided indicator\nmerge any new metadata back into the full metadata spreadsheet\n\nIf you don’t see your updated metadata or indicator plots within the next few days after uploading:\n\ncheck the Status page to see if your data has some issues\ncontact Lynn or Greg to see what’s up!\n\n\n\n\n\n\n\n2 Download Last Year\n\n\n\n\n\n\nNoteWhat’s the point of downloading last year’s data?\n\n\n\n\n\nThe option is provided just in case it’s helpful to remember what you did a year ago! Also, we may have edited last year’s file headers, etc., to follow CCIEA conventions\n\n\n\n\n\n3 Upload This Year\n\n\n\n\n\n\nNoteWhat if my data isn’t listed in the CCIEA filename convention list?\n\n\n\n\n\n\nHow do I name files for new data?\n\n\n\n\n\n\n4 Indicator File Conventions and formats\n\n\n\n\n\n\nNoteWhat is meant by the CCIEA “tidy” or “long” file format convention?\n\n\n\n\n\n\nanswer\n\n\n\n\n\n\n\n\n\n\nNoteWhat are the column headers for yearly data?\n\n\n\n\n\n\nanswer\n\n\n\n\n\n\n\n\n\n\nNoteWhat are the column headers for monthly data?\n\n\n\n\n\n\nanswer"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "CCIEA Uploader",
    "section": "",
    "text": "headervars=[\"year\",\"index\",\"timeseries\",\"metric\",\"SEup\",\"SElo\"]\nheadervarsmon=[\"time\",\"index\",\"timeseries\",\"metric\",\"SEup\",\"SElo\"]\ndata = FileAttachment(\"data/items_meta.json\").json()\npis=data.pis\nesr_year=data.esr_year\nlast_year=data.last_year\nname = pis.map(obj =&gt; obj.name);\nindx=name.indexOf(pi)\ncomponents=pis[indx].components\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nviewof pi = Inputs.select(name,{value:name[0], label: \"Data Provider\" });\n\nviewof component = Inputs.select(components,{format: x =&gt; x.name, label: \"Component\" });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nView IndicatorsDownload Last YearUpload This Year\n\n\n\n\n\n\n\n\nNoteUse this page to check your current metadata (click to expand)\n\n\n\n\n\n\nChoose a data provider above (and component if data falls under more than one component category)\nSelect each indicator on the left below to see the current indicator metadata\n\nIs your metadata correct?\n\nIf so, there’s no need to download last year’s metadata\n\nDoes your metadata need updating?\n\nIf so: go to tab 2, “Download Last Year”, to download a csv file of your current metadata\n\n\nConfused? See the work flow diagram\n\n\n\n\nhtml`\n            &lt;div&gt;\n                &lt;div&gt;&lt;span&gt;Metadata for &lt;span class=\"bold\"&gt;${m.Title}&lt;/span&gt;:&lt;/span&gt;&lt;/div&gt;&lt;br&gt;\n                ${m.default_figure != \"\"  ? html `&lt;div&gt;&lt;img class=\"blm\" src=\"figures/timeseries_images/${m.default_figure}\"&gt;&lt;/iron-image&gt;&lt;/div&gt;` : html `&lt;div&gt;No image found for this indicator&lt;/div&gt;`}\n&lt;/div&gt;`\nviewof indicator=Inputs.radio(component.indices,{value: component.indices[0]})\nmeta = await FileAttachment(\"data/CCIEA_metadata.csv\").csv();\nfiltered = meta.filter(metadata =&gt;{\n   return metadata.Title===indicator && metadata.Component_Section===component.name\n});\nmeta_download = meta.filter(metadownload=&gt;{\n   return metadownload.PI_ID===pi && metadownload.Component_Section===component.name\n});\n\ndownloadColumns = ['ID', 'Name', 'Funds'];\n\nm=filtered[0]\n        function year(longdate){\n            var datestr=String(longdate);\n            if(datestr)return (datestr.replace(\"-01-01T00:00:00Z\",\"\"));\n            }\n        function yesno(flag){\n            return (flag==1) ? \"yes\" : \"no\";\n            }\n        function geterddapurl(id,queryparam,value,variable,type){\n            var erddaploc='https://oceanview.pfeg.noaa.gov/erddap/tabledap/';\n            var query='';\n            if(queryparam!==''&&value!==''){\n                query='&'+queryparam+'=\"'+value+'\"';\n                if(queryparam==\"latitude\")query='&'+queryparam+'='+value;\n                }\n            var url=erddaploc+id+'.'+type+'?time,'+variable+query;\n            if(type.search(/png/i)&gt;=0||type.search('graph')&gt;=0){url+='&.draw=lines';}\n            return url;\n            }\n\n\nhtml`\n            &lt;div&gt;\n                &lt;div&gt;&lt;span class=\"bold\"&gt;Component: &lt;/span&gt;&lt;span&gt;${m.Component_Section}&lt;/span&gt;&lt;/div&gt;\n                &lt;div&gt;&lt;span class=\"bold\"&gt;Subcomponent: &lt;/span&gt;&lt;span&gt;${m.Subcomponent}&lt;/span&gt;&lt;/div&gt;\n                &lt;div&gt;&lt;span class=\"bold\"&gt;Dataset Title: &lt;/span&gt;&lt;span&gt;${m.Dataset_Title}&lt;/span&gt;&lt;/div&gt;\n                &lt;div&gt;&lt;span class=\"bold\"&gt;Indicator Title: &lt;/span&gt;&lt;span&gt;${m.Title}&lt;/span&gt;&lt;/div&gt;\n                &lt;div&gt;&lt;span class=\"bold\"&gt;Indicator Long Name: &lt;/span&gt;&lt;span&gt;${m.Long_variable_name}&lt;/span&gt;&lt;/div&gt;\n                &lt;div&gt;&lt;span class=\"bold\"&gt;Background Info: &lt;/span&gt;&lt;span&gt;&lt;a href=\"${m.Background_Info}\" target=\"_blank\"&gt;${m.Background_Info}&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;\n                &lt;div&gt;&lt;span class=\"bold\"&gt;Institution: &lt;/span&gt;&lt;span&gt;${m.Institution}&lt;/span&gt;&lt;/div&gt;\n                &lt;div&gt;&lt;span class=\"bold\"&gt;Units: &lt;/span&gt;&lt;span&gt;${m.Units}&lt;/span&gt;&lt;/div&gt;\n                &lt;div&gt;\n                ${m.region ? html `&lt;span class=\"bold\"&gt;Region: &lt;/span&gt;&lt;span&gt;${m.region}&lt;/span&gt;` : html ``}\n                ${m.latitude ? html `&lt;span class=\"bold\"&gt;Latitude: &lt;/span&gt;&lt;span&gt;${m.latitude} N&lt;/span&gt;` : ``}\n                ${m.latitude2 ? html `&lt;span class=\"bold\"&gt; - &lt;/span&gt;&lt;span&gt;${m.latitude2} N&lt;/span&gt;` : ``}\n                ${m.longitude ? html `&lt;span class=\"bold\"&gt;Longitude: &lt;/span&gt;&lt;span&gt;${m.longitude} E&lt;/span&gt;` : ``}\n                ${m.longitude2 ? html `&lt;span class=\"bold\"&gt; - &lt;/span&gt;&lt;span&gt;${m.longitude2}&lt;/span&gt;` : ``}\n                &lt;/div&gt;\n                &lt;div&gt;\n                ${m.sampling_frequency ? html `&lt;span class=\"bold\"&gt;Sampling frequency: &lt;/span&gt;&lt;span&gt;${m.Sampling_frequency}&lt;/span&gt;` : ``}\n                &lt;/div&gt;\n                &lt;div&gt;\n                ${m.Sampling_frequency ? html `&lt;span class=\"bold\"&gt;Sampling frequency: &lt;/span&gt;&lt;span&gt;${m.Sampling_frequency}&lt;/span&gt;` : ``}\n                &lt;/div&gt;\n                &lt;div&gt;\n                ${m.scientific_name ? html `&lt;span class=\"bold\"&gt;Scientific name: &lt;/span&gt;&lt;span&gt;${m.scientific_name}&lt;/span&gt;` : ``}\n                &lt;/div&gt;\n                &lt;div&gt;\n                ${m.Source_Data ? html `&lt;span class=\"bold\"&gt;Source Data: &lt;/span&gt;&lt;span&gt;${m.Source_Data}&lt;/span&gt;` : ``}\n                &lt;/div&gt;\n                &lt;div&gt;\n                ${m.Additional_Calculations ? html `&lt;span class=\"bold\"&gt;Additional Calculations: &lt;/span&gt;&lt;span&gt;${m.Additional_Calculations}&lt;/span&gt;` : ``}\n                &lt;/div&gt;\n                &lt;div&gt;\n                ${m.filename ? html `&lt;span class=\"bold\"&gt;PI filename: &lt;/span&gt;&lt;span&gt;${m.filename}&lt;/span&gt;` : ``}\n                &lt;/div&gt;\n                &lt;div&gt;\n                ${m.year_begin ? html `&lt;span class=\"bold\"&gt;Date range: &lt;/span&gt;&lt;span&gt;${year(m.year_begin)} - ${year(m.year_end)}&lt;/span&gt;` : ``}\n                &lt;/div&gt;\n                &lt;div&gt;\n                ${m.min ? html `&lt;span class=\"bold\"&gt;Indicator range: &lt;/span&gt;&lt;span&gt;min: ${m.min} max: ${m.max}&lt;/span&gt;` : ``}\n                &lt;/div&gt;\n                &lt;div&gt;\n                &lt;span class=\"bold\"&gt;Serve this data for CCIEA? &lt;/span&gt;&lt;span&gt;${yesno(m.currently_served)}&lt;/span&gt; &lt;span class=\"bold\"&gt;Whale Entanglement dataset? &lt;/span&gt;&lt;span&gt;${yesno(m.whale_entanglement_flag)}&lt;/span&gt; &lt;span class=\"bold\"&gt;Salmon web page? &lt;/span&gt;&lt;span&gt;${yesno(m.salmon_web_flag)}&lt;/span&gt;\n                &lt;/div&gt;\n                &lt;div&gt;\n                ${m.no_download_flag ? html `&lt;span class=\"bold\"&gt;No download, private data&lt;/span&gt;`\n                    : html `&lt;span class=\"bold\"&gt;ERDDAP data links:&lt;/span&gt; &lt;span&gt;(ERDDAP dataset id: ${m.ERDDAP_Dataset_ID}) &lt;/span&gt;\n                        &nbsp;|&nbsp;&lt;span&gt;&lt;a class=\"noline\" href='${geterddapurl(m.ERDDAP_Dataset_ID,m.ERDDAP_query_parameter,m.ERDDAP_query_value,m.ERDDAP_variable_name,\"htmlTable\")}' target='_blank'&gt;View data as html&lt;/a&gt;&lt;/span&gt;\n                        &nbsp;|&nbsp;&lt;span&gt;&lt;a class=\"noline\" href='${geterddapurl(m.ERDDAP_Dataset_ID,m.ERDDAP_query_parameter,m.ERDDAP_query_value,m.ERDDAP_variable_name,\"csv\")}' target='_blank'&gt;Download a csv file&lt;/a&gt;&lt;/span&gt;\n                        &nbsp;|&nbsp;&lt;span&gt;&lt;a class=\"noline\" href='${geterddapurl(m.ERDDAP_Dataset_ID,m.ERDDAP_query_parameter,m.ERDDAP_query_value,m.ERDDAP_variable_name,\"html\")}' target='_blank'&gt;ERDDAP link&lt;/a&gt;&lt;/span&gt;\n                    `}\n                &lt;/div&gt;\n                &lt;div&gt;\n                ${m.last_metadata_update ? html `&lt;span class=\"bold\"&gt;Last netadata update: &lt;/span&gt;&lt;span&gt;${m.last_metadata_update}&lt;/span&gt;` : ``}\n                \n                ${m.last_data_update ? html `&lt;span class=\"bold\"&gt;Last data update: &lt;/span&gt;&lt;span&gt;${m.last_data_update}&lt;/span&gt;` : ``}\n                &lt;/div&gt;\n            &lt;/div&gt;\n        `\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nNoteUse this page to (optionally) download previous data and metadata (click to expand)\n\n\n\n\n\n\nMetadata: download a csv file of your current metadata if it needs updating\n\nEdit the csv file as needed, but\n\nPlease keep the column headers as they are.\nAvoid special characters. We may be able to deal with them but they can cause various issues\nIf you import the csv file into a spreadsheet application (ie Excel) please export back out as a csv file\n\nAfter you edit the metadata, go to tab 3 “Upload This Year” to go to a Google Drive folder where you can upload the new (csv) metadata\n\nData: you can either:\n\ndownload last year’s files and manually update them, or use them as a template for this year (click the button to go to a Google Drive folder where your data from last year is available)\nor just upload new files (go to tab 3 “Upload This Year”)\n\n\n\n\n\n\nhtml`&lt;h3&gt;View and edit current metadata and ${last_year} data for:  ${pis[indx].name}&lt;/h3&gt;\n&lt;div class=\"sml\"&gt;&lt;i&gt;Use this page to download csv files of current data and/or metadata and edit as needed.&lt;/i&gt;&lt;/div&gt;\n&lt;br&gt;&lt;i&gt;Current metadata:&lt;/i&gt;&lt;br&gt;`\n\n\n\n\n\n\n\ndownloadcolumns1 = ['Dataset_Title', 'Title','Long_variable_name','Units','Background_Info','Institution','region','latitude','latitude2','longitude','longitude2','Sampling_frequency','Source_Data','Additional_Calculations','CCIEA_timeseries_ID','serve_flag','PI_ID'];\n//downloadcolumns = ['Dataset_Title', 'Title'];\nsubsetdata = meta_download.map(obj =&gt; {\n  const newObj = {};\n  downloadcolumns1.forEach(key =&gt; {\n   if (obj.hasOwnProperty(key)) {\n      newObj[key] = obj[key];\n    }\n  });\n  return newObj;\n});\nviewof download = Inputs.table(subsetdata,{select:false, rows: 5})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nhtml`&lt;br&gt;&lt;div class=\"sml\"&gt;&lt;i&gt;Directly download a csv file of the above current metadata for editing:&lt;/i&gt;&lt;/div&gt;`\n\n\n\n\n\n\n\nmetafile=\"CCIEA_metadata_\"+pis[indx].name+\".csv\"\nimport {downloadButton} from \"@jeremiak/buttons-that-download-json-as-csv\"\ndownloadButton(subsetdata,metafile)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nhtml`&lt;br&gt;&lt;br&gt;&lt;i&gt;Open the Google Drive folder containing ${pis[indx].name} ${last_year} data:&lt;/i&gt;`\n\n\n\n\n\n\n\nviewof lastyear = Inputs.button(\"Download \"+last_year+\" Data\",{value: pis[indx].last_year, reduce: () =&gt; window.open(\"https://drive.google.com/drive/folders/\"+pis[indx].last_year,\"_blank\")})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nNoteUse this page to upload metadata, data and other files (click to expand)\n\n\n\n\n\n\nUpload your new data and/or metadata\n\nWhen your data or metadata is ready (either the updated previous files or new files), this tab directs you to go to a Google Drive folder where you can upload this year’s data and (optionally) edited metadata, both into the same folder\n\nBefore you upload, please check your files to make sure they can be automatically ingested\n\nPlease name your files as in the list of acceptable file names shown\nBrowse to the data file you want to upload\n\na table of your data will appear\nbelow the table are the results of basic checks of your files. This tool checks for\n\nIs it a csv file?\nDoes it follow the CCIEA file name convention listed in the table for your files?\nDo all the column follow the CCIEA convention?\n\ntime column named”year” for yearly data and “time” for monthly data\n\n\n\n\n\n\n\n\n\n\nfile_naming = FileAttachment(\"data/cciea_naming_conventions.json\").json()\nfilenames = file_naming.filter(files =&gt;{\n   return files.id==pis[indx].id\n});\ntemp = filenames[0].files\nnewfiles=temp.filter(files =&gt;{\n   return files.newname !== null && files.title !== null\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nhtml`&lt;h3&gt;Upload ${pis[indx].name} ${esr_year} data and metadata&lt;/h3&gt;`\n\n\n\n\n\n\n\nhtml`&lt;h5&gt;&lt;i&gt;1. Please name your files as follows:&lt;/i&gt;&lt;/h5&gt;`\n\n\n\n\n\n\n\nviewof file_conventions = Inputs.table(newfiles,{header:{title:\"Dataset Title\",newname:\"CCIEA filename convention\"},select: false, rows: 5})\n\n\n\n\n\n\n\n\n\nhtml`&lt;hr&gt;&lt;p&gt;&lt;h5&gt;&lt;i&gt;2. Check your csv data file:&lt;/i&gt;&lt;/h5&gt;&lt;/p&gt;`\n\n\n\n\n\n\n\nviewof csvfile = Inputs.file({accept: \".csv\", required: true})\n\nnewfile = csvfile.csv({typed: true})\ncolumns = Object.keys(newfile[0])\nfilename=csvfile.name\nmonthly = filename.search(\"_M.csv\")&gt;0 || filename.search(\"Monthly\")&gt;0\n\nInputs.table(newfile,{select: false, format:{year: x =&gt; x.toLocaleString(\"en-US\").replace(/\\,/,''), time: (x) =&gt; { return typeof x === 'number' ? x.toLocaleString(\"en-US\").replace(/\\,/,'') : x.toISOString().substr(0,10)}}})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nhtml`&lt;hr&gt;`\n\n\n\n\n\n\n\nhtml`&lt;h5&gt;&lt;i&gt;Checking file:&lt;/i&gt; ${filename}:&lt;/h5&gt;`\n\n\n\n\n\n\n\nhtml`&lt;p&gt;&lt;h5&gt;&lt;i&gt;We are checking for the following:&lt;/i&gt;&lt;/h5&gt;`\n\n\n\n\n\n\n\nhtml` Does it follow the ${pis[indx].name} filename convention?`\n\n\n\n\n\n\n\nallowednames = newfiles.map(obj =&gt; obj.newname);\n\n{return allowednames.includes(filename)==true ? html`&lt;span class=\"yes\"&gt;yes&lt;/span&gt;` : html`&lt;span class=\"no\"&gt;no&lt;/span&gt;`}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nhtml` Is the time column named &lt;b&gt;${headervars[0]}&lt;/b&gt; for yearly data or &lt;b&gt;${headervarsmon[0]}&lt;/b&gt; for monthly data?`;\n\n\n\n\n\n\n\n{\nif(monthly==true)return columns.includes(headervarsmon[0])==true ? html`&lt;span class=\"yes\"&gt;yes&lt;/span&gt;` : html`&lt;span class=\"no\"&gt;no&lt;/span&gt;`\nif(monthly==false)return columns.includes(headervars[0])==true ? html`&lt;span class=\"yes\"&gt;yes&lt;/span&gt;` : html`&lt;span class=\"no\"&gt;no&lt;/span&gt;`\n}\n\n\n\n\n\n\n\nhtml` Is the indicator value column named &lt;b&gt;${headervars[1]}&lt;/b&gt;?`\n\n\n\n\n\n\n\n{return columns.includes(headervars[1])==true ? html`&lt;span class=\"yes\"&gt;yes&lt;/span&gt;` : html`&lt;span class=\"no\"&gt;no&lt;/span&gt;`}\n\n\n\n\n\n\n\nhtml` Is there a column named &lt;b&gt;${headervars[2]}&lt;/b&gt; describing each indicator?`\n\n\n\n\n\n\n\n{return columns.includes(headervars[2])==true ? html`&lt;span class=\"yes\"&gt;yes&lt;/span&gt;` : html`&lt;span class=\"no\"&gt;no&lt;/span&gt;`}\n\n\n\n\n\n\n\n\n\nhtml`&lt;br&gt;&lt;p&gt;&lt;h5&gt;&lt;i&gt;3. If your files all pass the check, go the Google Drive folder for uploading your data:&lt;/i&gt;&lt;/h5&gt;&lt;/p&gt;`\n\n\n\n\n\n\n\nviewof thisyear = Inputs.button(\"Upload \"+esr_year+\" data and metadata\",{value: pis[indx].this_year, reduce: () =&gt; window.open(\"https://drive.google.com/drive/folders/\"+pis[indx].upload,\"_blank\")})\n//url=\"https://drive.google.com/drive/folders/\"+last\n//html`&lt;a href=${url} target=_blank&gt;${url}&lt;/a&gt;`\n\nind_url=\"https://oceanview.pfeg.noaa.gov/erddap/tabledap/CCIEA_metadata.json?&currently_served=1&indicator_title=\"+'\"'+encodeURIComponent(indicator)+'\"'\n\nhtml`&lt;br&gt;&lt;p&gt;&lt;i&gt;Note that you can also place other files such as images and text you want to share with CCIEA in this folder&lt;/i&gt;&lt;/p&gt;`"
  },
  {
    "objectID": "work_flow1.html",
    "href": "work_flow1.html",
    "title": "CCIEA Uploader",
    "section": "",
    "text": "CCIEA Uploader Flow Chart\n\n\n\nlast_year=\"2024-2025\"\ndata_file_node=\"N[\\\\\"+last_year+\" data csv file\\\\]\"\nmeta_file_node=\"M[\\\\\"+last_year+\" metadata csv file\\\\]\"\n\nhtml`&lt;style&gt;\n:root{\n--mermaid-label-fg-color: #000;\n--mermaid-fg-color--lightest: #fff;\n--mermaid-fg-color--lighter: #fff;\n}\n&lt;/style&gt;\n`\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nmermaid`\nflowchart TD\nsubgraph &lt;b&gt;&lt;/b&gt;\n  direction LR\n  subgraph &lt;i&gt;Legend&lt;/i&gt;\n  direction LR\n   L1(Web page tab) ~~~ L2(menu) ~~~ L3(Decision) ~~~ L4(Data) ~~~ L5(Action)\nend\nsubgraph &lt;br&gt;\n  direction TB\n   Z1(CCIEA Uploader) --&gt; B(\"&lt;b&gt;Start:&lt;/b&gt; Choose Data Provider\")\n   B --&gt;  Z(View Indicators)\n   B -.Rare: Data provider&lt;br&gt;has data in&lt;br&gt;more than one&lt;br&gt;component.-&gt; E(Choose Component) .-&gt; Z\n   Z --&gt;  D[Select Indicators and&lt;br&gt;examine metadata]\n   Z -. optional .-&gt; K1{Download&lt;br&gt;previous&lt;br&gt;data files?}\n   D --&gt;F{Metadata&lt;br&gt;need&lt;br&gt;updating?}\n   H --&gt; ${meta_file_node}  -- edit&lt;br&gt;metadata ---&gt; G\n   K1-.Yes.-&gt; H[Download Last Year] .-&gt;  ${data_file_node}  -. view and&lt;br&gt;optionally update ..-&gt; G\n   F --No--&gt; G[Upload This year]\n   K1 -.No.-&gt; G\n   F --Yes--&gt; H[Download Last Year]\n   G --&gt; I{What are you&lt;br&gt;uploading?} --&gt; J[/Updated&lt;br&gt;metadata/] --------&gt;T[Upload file to Google Drive]\n   I--&gt; K[/Indicator&lt;br&gt;time series/]--&gt; O{Data file&lt;br&gt;name in&lt;br&gt;conventions&lt;br&gt;list?}\n   I--&gt; V[/other types&lt;br&gt;of files/] --Upload plots,&lt;br&gt;indicator text summaries,&lt;br&gt;other ESR files--------&gt;T\n   O --Yes--&gt; P[Browse your&lt;br&gt;file system&lt;br&gt;for data file&lt;br&gt;-&gt; csv only]\n   O --No--&gt; Q[rename file] --&gt; P\n   P --&gt; R[/View data in uploader table/] --&gt;S{do file&lt;br&gt;checks pass?}\n   S --Yes--&gt;  T\n   S -- No --&gt; U[Edit to&lt;br&gt;correct file&lt;br&gt;name or headers] --&gt; T\n   T --&gt; Y{Upload&lt;br&gt;another csv&lt;br&gt;data file?}--Yes--&gt; G\n   Y --No--&gt; W[&lt;b&gt;End:&lt;/b&gt; return tomorrow&lt;br&gt;to view updated&lt;br&gt;data and metadata]\n  end\nend\n\n  classDef top fill:#fff,stroke:#4682b4,stroke-width:4px,color:#000;\n  classDef htm fill:#4682b4,stroke:#333,stroke-width:2px,color:#fff;\n  classDef menu fill:#ffffc5,stroke:#333,stroke-width:2px,color:#000;\n  classDef data fill:#add8e6,stroke:#333,stroke-width:2px,color:#000;\n  classDef action fill:#ffcccb,stroke:#333,stroke-width:2px,color:#000;\n  classDef decision fill:#d4e6f9,stroke:#333,stroke-width:2px,color:#000;\n  class Z1 top\n  class Z,H,L,G,L1 htm\n  class B,E,D,T,P,W,X,L2 menu\n  class K1,F,I,O,S,Y,L3 decision\n  class J,K,M,N,R,V,L4 data\n  class Q,U,L5 action\n  linkStyle 4,5,8,10,16,19,22,23,26,29,30,31,34,36 stroke:#000,stroke-width:3px,color:black;\n `\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nStart: Choose a data provider at the top of the page (and a component if available)\n\n\n\nNext: View Indicators\n\nSelect each indicator on the left of the page to see the current indicator metadata\n\nIs the metadata correct?\n\nYes: there’s no need to download last year’s metadata\nNo: go to “Download Last Year”, to download a csv file of the current metadata and edit as needed\n\n\n\n\nDownload Last Year: (as needed)\n\n\nMetadata: download and edit a csv file of your current metadata (as needed)\nData: optionally download last year’s indicator files and manually update them, or use them as a template for this year\n\n\n\nUpload This Year:\n\n\nBrowse for csv files to upload\nCheck your files to ensure they can be automatically ingested\nClick the Upload button to go to the chosen Data Provider’s Google Drive folder to upload metadata, data, and/or other types of files\n\n\n\nEnd\nA cron job runs every morning up update the metadata, indicators, amd uploader status."
  }
]